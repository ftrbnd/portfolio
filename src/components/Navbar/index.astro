---
import { USERNAME } from '../../services/last-fm';
import { author, email } from '../../utils/constants';
import CurrentlyListening from './CurrentlyListening.astro';
import Menu from './Menu.astro';

const nickName = author.substring(0, 3);
const lastNameLetter = author.split(' ')[1][0];
---

<div class='sticky top-0 z-50 shadow-md navbar bg-base-100'>
	<div class='navbar-start'>
		<div class='dropdown'>
			<div
				tabindex='0'
				role='button'
				class='btn btn-ghost lg:hidden'>
				<svg
					xmlns='http://www.w3.org/2000/svg'
					class='w-5 h-5'
					fill='none'
					viewBox='0 0 24 24'
					stroke='currentColor'
					><path
						stroke-linecap='round'
						stroke-linejoin='round'
						stroke-width='2'
						d='M4 6h16M4 12h8m-8 6h16'
					></path></svg
				>
			</div>
			<ul
				tabindex='0'
				class='menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52'>
				<Menu />
			</ul>
		</div>
		<a
			href='/'
			class='hidden text-xl btn btn-ghost sm:flex'
			>{author}</a
		>
		<a
			href='/'
			class='text-xl btn btn-ghost sm:hidden'
			>{nickName} {lastNameLetter}.</a
		>
		<div class='hidden lg:flex'>
			<ul class='px-1 menu menu-horizontal'>
				<Menu />
			</ul>
		</div>
	</div>

	<div class='gap-1 navbar-end'>
		<CurrentlyListening server:defer>
			<div slot='fallback'>
				<div class='card bg-base-100 image-full'>
					<div class='card-body flex items-center justify-center py-0'>
						<a
							href={`https://last.fm/user/${USERNAME}`}
							target='_blank'
							class='flex flex-col sm:flex-row gap-2 items-center justify-center text-center'>
							<i class={`fa-solid fa-record-vinyl fa-xl`}></i>
							<div class='hidden sm:flex flex-col'>
								<h2 class='card-title hidden sm:block text-start'>
									Currently listening to...
								</h2>
								<p class='hidden lg:block text-start'>probably The Mar√≠as</p>
							</div>
						</a>
					</div>
				</div>
			</div>
		</CurrentlyListening>

		<a
			target='_blank'
			class='btn btn-ghost'
			href={`mailto:${email}`}>
			<svg
				class='w-6 h-6'
				fill='currentColor'
				role='img'
				viewBox='0 0 24 24'
				xmlns='http://www.w3.org/2000/svg'>
				<title>Gmail</title>
				<path
					d='M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z'
				></path>
			</svg>
		</a>

		<a
			target='_blank'
			class='btn btn-ghost'
			href='https://github.com/ftrbnd'>
			<svg
				class='w-6 h-6'
				fill='currentColor'
				role='img'
				viewBox='0 0 24 24'
				xmlns='http://www.w3.org/2000/svg'>
				<title>GitHub</title>
				<path
					d='M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'
				></path>
			</svg>
		</a>
	</div>
</div>
